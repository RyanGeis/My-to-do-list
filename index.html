<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Daily System</title>

<style>
body {
  margin: 0;
  font-family: system-ui, sans-serif;
  background: #0f0f0f;
  color: white;
  padding-bottom: 90px;
}

h1 {
  text-align: center;
  margin-top: 20px;
}

.grid {
  display: grid;
  gap: 12px;
  padding: 20px;
}

button {
  padding: 14px;
  border-radius: 10px;
  border: none;
  background: #1f1f1f;
  color: white;
  cursor: pointer;
}

.modal {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.6);
  justify-content: center;
  align-items: center;
}

.modal-content {
  background: #141414;
  padding: 20px;
  border-radius: 14px;
  width: 90%;
  max-width: 400px;
}

.modal-content.large {
  max-width: 600px;
}

label {
  display: block;
  margin-top: 10px;
}

select {
  width: 100%;
  padding: 8px;
  margin-top: 4px;
}

#weekBar {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  height: 80px;
  background: #111;
  display: flex;
  align-items: center;
  justify-content: space-around;
  cursor: pointer;
}

.day {
  opacity: 0.6;
}

.day.today {
  opacity: 1;
  font-weight: bold;
}

#calendarGrid {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 6px;
  margin-top: 16px;
}
</style>
</head>

<body>

<h1>Daily System</h1>

<div class="grid">
  <button onclick="openModal('checkinModal')">Daily Check-In</button>
</div>

<!-- CHECK-IN MODAL -->
<div id="checkinModal" class="modal">
  <div class="modal-content">
    <h2>Daily Check-In</h2>

    <label>Mood</label>
    <select id="mood">
      <option>Low</option>
      <option>Neutral</option>
      <option>High</option>
    </select>

    <label>Energy</label>
    <select id="energy">
      <option>Low</option>
      <option>Medium</option>
      <option>High</option>
    </select>

    <label>Focus</label>
    <select id="focus">
      <option>Low</option>
      <option>Medium</option>
      <option>High</option>
    </select>

    <br><br>
    <button onclick="submitCheckIn()">Save</button>
    <button onclick="closeModal('checkinModal')">Close</button>
  </div>
</div>

<!-- CALENDAR MODAL -->
<div id="calendarModal" class="modal">
  <div class="modal-content large">
    <h2 id="calendarHeader"></h2>
    <div id="calendarGrid"></div>
    <br>
    <button onclick="closeCalendar()">Close</button>
  </div>
</div>

<!-- WEEK BAR -->
<div id="weekBar" onclick="openCalendar()"></div>

<script>
const $ = (id) => document.getElementById(id);
const today = new Date();

/* MODALS */
function openModal(id) {
  $(id).style.display = "flex";
}
function closeModal(id) {
  $(id).style.display = "none";
}

/* CHECK-IN */
function submitCheckIn() {
  const data = {
    mood: $("mood").value,
    energy: $("energy").value,
    focus: $("focus").value,
    date: today.toDateString()
  };
  localStorage.setItem("lastCheckIn", JSON.stringify(data));
  alert("Check-in saved.");
  closeModal("checkinModal");
}

/* WEEK BAR */
function renderWeekBar() {
  $("weekBar").innerHTML = "";
  const start = new Date(today);
  start.setDate(today.getDate() - today.getDay());

  for (let i = 0; i < 7; i++) {
    const d = new Date(start);
    d.setDate(start.getDate() + i);

    const div = document.createElement("div");
    div.className = "day" + (d.toDateString() === today.toDateString() ? " today" : "");
    div.textContent = d.toLocaleDateString("en-US", { weekday: "short" });
    $("weekBar").appendChild(div);
  }
}

/* CALENDAR */
function openCalendar() {
  renderCalendar();
  openModal("calendarModal");
}
function closeCalendar() {
  closeModal("calendarModal");
}
function renderCalendar() {
  const grid = $("calendarGrid");
  const header = $("calendarHeader");
  grid.innerHTML = "";

  const year = today.getFullYear();
  const month = today.getMonth();

  header.textContent = today.toLocaleDateString("en-US", {
    month: "long",
    year: "numeric"
  });

  const first = new Date(year, month, 1);
  const last = new Date(year, month + 1, 0);

  for (let i = 0; i < first.getDay(); i++) {
    grid.appendChild(document.createElement("div"));
  }

  for (let d = 1; d <= last.getDate(); d++) {
    const cell = document.createElement("div");
    cell.textContent = d;
    if (d === today.getDate()) cell.style.fontWeight = "bold";
    grid.appendChild(cell);
  }
}

/* INIT */
window.onload = renderWeekBar;
</script>

</body>
</html>
